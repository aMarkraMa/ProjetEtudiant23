<?xml version="1.0" encoding="utf-8" ?><!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"        "http://mybatis.org/dtd/mybatis-3-mapper.dtd" ><mapper namespace="com.projet.mapper.NoteMapper">    <resultMap id="noteResultMap" type="Note">        <result property="noteSoutenance" column="note_soutenance"/>        <association property="binome" javaType="com.projet.entity.Binome">            <id property="idBinome" column="id_binome"/>            <result property="noteRapport" column="note_rapport"/>            <result property="dateReelleRemise" column="date_reelle_remise"/>            <association property="projet" resultMap="projetResultMap"/>        </association>        <association property="etudiant" javaType="etudiant">            <id property="idEtudiant" column="id_etudiant"/>            <result property="nomEtudiant" column="nom_etudiant"/>            <result property="prenomEtudiant" column="prenom_etudiant"/>        </association>    </resultMap>    <resultMap id="projetResultMap" type="com.projet.entity.Projet">        <id property="idProjet" column="id_projet"/>        <result property="nomMatiere" column="nom_matiere"/>        <result property="sujet" column="sujet"/>        <result property="datePrevueRemise" column="date_prevue_remise"/>        <result property="pourcentageSoutenance" column="pourcentage_soutenance"/>    </resultMap>        <insert id="insertNote">        INSERT INTO notes(id_projet, id_binome, id_etudiant,note_soutenance)        VALUES (#{idProjet}, #{idBinome}, #{idEtudiant}, #{noteSoutenance})    </insert>    <delete id="deleteNote">        DELETE FROM notes WHERE id_etudiant = #{idEtudiant} AND id_binome = #{idBinome} AND id_projet = #{idProjet}    </delete>    <update id="updateNote">        UPDATE notes        <set>            <if test="noteRapport != null"> note_rapport= #{noteRapport},</if>            <if test="noteSoutenance != null"> note_soutenance= #{noteSoutenance},</if>        </set>        WHERE id_etudiant = #{idEtudiant}        AND id_binome = #{idBinome}        AND id_projet = #{idProjet}    </update>          <select id="selectAll" resultMap="noteResultMap" resultType="com.projet.entity.Note">        select *        from notes n,             projets p,             etudiants e,             binomes b        where n.id_projet = p.id_projet          and n.id_etudiant = e.id_etudiant          and n.id_binome = b.id_binome          and n.id_projet = b.id_projet;    </select>        <select id="selectByCondition" resultType="com.projet.entity.Note">        select *        from notes n,             binomes b,             projets p,             etudiants e        <where>            n.id_projet = b.id_projet            and n.id_binome = b.id_binome            and e.id_etudiant = n.id_etudiant            <if test="etudiant != null and etudiant.nomEtudiant != null and etudiant.nomEtudiant != ''">                and lower(e.nom_etudiant) like lower(#{etudiant.nomEtudiant})            </if>            <if test="etudiant != null and etudiant.prenomEtudiant != null and etudiant.prenomEtudiant != ''">                and lower(e.prenom_etudiant) like lower(#{etudiant.prenomEtudiant})            </if>            <if test="projet != null and projet.nomMatiere != null and projet.nomMatiere != ''">                and lower(p.nom_matiere) like lower(#{binome.projet.nomMatiere})            </if>            <if test="projet != null and projet.sujet != null and projet.sujet != ''">                and lower(p.sujet) like lower(#{binome.projet.sujet})            </if>        </where>    </select></mapper>